/* asNEAT-visualizer 0.1.0 2014-03-16 */
define("asNEAT/asNEAT-visualizer",["asNEAT/visualization","exports"],function(a,b){"use strict";var c=a["default"],d={};d.createVisualization=function(a){return new c(a)},b["default"]=d}),define("asNEAT/visualization",["exports"],function(a){"use strict";var b=function(a){_.defaults(this,a,this.defaultParameters);var b=d3.select(this.selector).append("svg").attr("width",this.width).attr("height",this.height);b.append("g").attr("class","connections"),b.append("g").attr("class","nodes"),this.svg=b,this.vNodes=[],this.vConnections=[],this.refresh()};b.prototype.defaultParameters={network:null,width:800,height:600,padding:20,selector:".network",animateSpeed:750},b.prototype.updateVisualizationNetwork=function(){var a=this.vNodes,b=this.vConnections;_.forEach(this.network.nodes,function(b){var d=_.find(a,{asNEATNode:b});d||a.push(c.createVNodeFrom(b))}),_.forEach(this.network.connections,function(c){var e=_.find(b,{asNEATConnection:c});if(!e){var f=_.find(a,{asNEATNode:c.inNode}),g=_.find(a,{asNEATNode:c.outNode});b.push(new d({inVNode:f,outVNode:g,asNEATConnection:c}))}})},b.prototype.refresh=function(){function a(a){return a.depthX*(n-2*p)+p}function b(a){return a.depthY*(o-2*p)+p}function c(a){var b=e(a),c=f(a);return"M"+b+","+c+" C"+b+","+c+" "+b+","+c+" "+b+","+c}function d(a){var b=e(a),c=f(a),d=g(a),i=h(a);return"M"+b+","+c+" C"+(b+r)+","+c+" "+(d-r)+","+i+" "+d+","+i}function e(b){return a(b.inVNode)}function f(a){return b(a.inVNode)}function g(b){return a(b.outVNode)}function h(a){return b(a.outVNode)}function i(a){return a.asNEATNode instanceof asNEAT.OscillatorNode?"green":a.asNEATNode instanceof asNEAT.OutNode?"black":"red"}function j(a){return a.asNEATConnection.enabled?"black":"gray"}function k(a){return a.asNEATConnection.id}var l=this.vNodes,m=this.vConnections,n=this.width,o=this.height,p=this.padding,q=this.animateSpeed;this.updateVisualizationNetwork();var r=200,s=this.svg.select(".nodes").selectAll(".node").data(l);s.transition().duration(q).attr("cx",a).attr("cy",b).attr("r",10),s.enter().append("circle").attr("class","node").attr("cx",a).attr("cy",b).attr("r",0).attr("stroke","black").attr("stroke-width",2).attr("fill",i).transition().duration(q).attr("r",10);var t=this.svg.select(".connections").selectAll(".connection").data(m,k);t.transition().duration(q).attr("d",d).style("stroke",j),t.enter().append("path").attr("class","connection").attr("d",c).attr("fill","none").style("stroke",j).style("stroke-width",2).transition().duration(q).attr("d",d)};var c=function(a){_.defaults(this,a,this.defaultParameters)};c.prototype.defaultParameters={depthX:0,depthY:0,asNEATNode:null},c.createVNodeFrom=function(a){return new c({depthX:Math.random(),depthY:Math.random(),asNEATNode:a})};var d=function(a){_.defaults(this,a,this.defaultParameters)};d.prototype.defaultParameters={inVNode:null,outVNode:null,asNEATConnection:null},a["default"]=b});