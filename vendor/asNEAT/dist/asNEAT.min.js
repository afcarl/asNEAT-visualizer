/* asNEAT 0.4.4 2014-10-07 */

define("asNEAT/asNEAT",["exports"],function(a){"use strict";var b={};window.AudioContext=window.AudioContext||window.webkitAudioContext||function(){this.supported=!1},b.context=new window.AudioContext,"undefined"==typeof b.context.supported&&(b.context.supported=!0),window.OfflineAudioContext=window.OfflineAudioContext||window.webkitOfflineAudioContext||function(){this.supported=!1},b.context.supported&&(b.globalGain=b.context.createGain(),b.globalGain.gain.value=.5,b.globalGain.connect(b.context.destination)),b.OutNodes=[],b.resetOutNodes=function(){_.forEach(b.OutNodes,function(a){a.resetLocalGain()})},b.resetOutNodes(),b.createOfflineContextAndGain=function(){var a,c=new window.OfflineAudioContext(2,441e3,44100);return"undefined"==typeof c.supported&&(c.supported=!0),c.supported&&(a=c.createGain(),a.gain.value=b.globalGain.gain.value,a.connect(c.destination)),{context:c,globalGain:a}},b.nodeTypes=["gainNode","filterNode","delayNode","feedbackDelayNode","compressorNode","convolverNode"],a["default"]=b}),define("asNEAT/connection",["exports"],function(a){"use strict";function b(a,b){if(this.enabled){b=b||"";var d=b+(b?"Node":"node");this.gainNode=a.context.createGain(),this.gainNode.gain.value=this.weight,this.sourceNode[d].connect(this.gainNode);var e=this.targetParameter;if(null===e)this.gainNode.connect(this.targetNode[d]);else{var f=this.targetParameterNodeName?this.targetParameterNodeName:"node";d=b+(b?c.upperCaseFirstLetter(f):f),this.gainNode.connect(this.targetNode[d][e])}return this}}var c=require("asNEAT/utils")["default"],d=(c.log,require("asNEAT/asNEAT")["default"]),e=(d.context,d.offlineContext,"Connection"),f=function(a){c.extend(this,this.defaultParameters,a),this.gainNode=null,this.hasChanged=!1,this.id=a&&"undefined"!=typeof a.id?a.id:c.createHash()};f.prototype.name=e,f.prototype.defaultParameters={sourceNode:null,targetNode:null,targetParameter:null,targetParameterNodeName:"node",weight:1,enabled:!0,mutationDeltaChance:.8,mutationDeltaInterpolationType:c.InterpolationType.EXPONENTIAL,mutationDelta:{min:[.05,.3],max:[.1,.6]},randomMutationRange:{min:.1,max:1.5}},f.prototype.clone=function(a,b){var c=a||this.sourceNode.clone(),d=b||this.targetNode.clone();return new f({id:this.id,sourceNode:c,targetNode:d,targetParameter:this.targetParameter,targetParameterNodeName:this.targetParameterNodeName,weight:this.weight,enabled:this.enabled,mutationDeltaChance:this.mutationDeltaChance,mutationDeltaInterpolationType:this.mutationDeltaInterpolationType,mutationDelta:_.clone(this.mutationDelta),randomMutationRange:_.clone(this.randomMutationRange)})},f.prototype.connect=function(a){b.call(this,a)},f.prototype.offlineConnect=function(a){b.call(this,a,"offline")},f.prototype.disable=function(){return this.enabled=!1,this},f.prototype.mutate=function(a){c.mutateParameter({obj:this,parameter:"weight",mutationDistance:a,mutationDeltaInterpolationType:this.mutationDeltaInterpolationType,mutationDeltaChance:this.mutationDeltaChance,mutationDelta:this.mutationDelta,randomMutationRange:this.randomMutationRange});return this},f.prototype.getParameters=function(){return{name:e,id:this.id,weight:this.weight,enabled:this.enabled,sourceNode:this.sourceNode.name,targetNode:this.targetNode.name,targetParameter:this.targetParameter}},f.prototype.toString=function(){return(this.enabled?"":"*")+"connection("+this.weight.toFixed(2)+")("+this.sourceNode.id+" --> "+this.targetNode.id+(this.targetParameter?": "+this.targetParameter:"")+")"},f.prototype.toJSON=function(){var a={id:this.id,sourceNode:this.sourceNode.id,targetNode:this.targetNode.id,targetParameter:this.targetParameter,targetParameterNodeName:this.targetParameterNodeName,weight:this.weight,enabled:this.enabled,mutationDeltaChance:this.mutationDeltaChance,mutationDeltaInterpolationType:this.mutationDeltaInterpolationType,mutationDelta:this.mutationDelta,randomMutationRange:this.randomMutationRange};return JSON.stringify(a)},a["default"]=f}),define("asNEAT/network",["exports"],function(a){"use strict";function b(a,b,c,d){b=b||{context:i.context,globalGain:i.globalGain},c=c||"refresh",d=d||"connect",_.forEach(this.nodes,function(a){a[c](b)}),_.forEach(this.connections,function(a){a[d](b)}),"function"==typeof a&&a(b)}function c(a){if(null==a)throw"no last mutation from mutate";_.forEach(a.objectsChanged,function(a){a.hasChanged=!0})}var d=require("asNEAT/utils")["default"],e=require("asNEAT/nodes/noteOscillatorNode")["default"],f=require("asNEAT/nodes/oscillatorNode")["default"],g=require("asNEAT/nodes/outNode")["default"],h=require("asNEAT/connection")["default"],i=require("asNEAT/asNEAT")["default"],j=i.nodeTypes,k=d.log,l="Network";i.globalOutNode=new g;var m=function(a){if(d.extend(this,this.defaultParameters,a),this.lastMutation=null,0===this.nodes.length){var b=e.random();b.noteOffset=0,this.nodes.push(i.globalOutNode),this.nodes.push(b)}0===this.connections.length&&this.connections.push(new h({sourceNode:this.nodes[1],targetNode:this.nodes[0],weight:.5})),this.id=a&&"undefined"!=typeof a.id?a.id:d.createHash()};m.prototype.name=l,m.prototype.defaultParameters={nodes:[],connections:[],generation:0,connectionMutationInterpolationType:d.InterpolationType.EXPONENTIAL,connectionMutationRate:[.05,.8],nodeMutationInterpolationType:d.InterpolationType.EXPONENTIAL,nodeMutationRate:[.05,.8],addOscillatorFMMutationRate:.5,addConnectionFMMutationRate:.5,evolutionHistory:[]},m.prototype.clone=function(){var a=[];_.forEach(this.nodes,function(b){a.push(b.clone())});var b=[];return _.forEach(this.connections,function(c){var d=_.find(a,{id:c.sourceNode.id}),e=_.find(a,{id:c.targetNode.id});b.push(c.clone(d,e))}),new m({nodes:a,connections:b,generation:this.generation,connectionMutationInterpolationType:this.connectionMutationInterpolationType,connectionMutationRate:_.clone(this.connectionMutationRate),nodeMutationInterpolationType:this.nodeMutationInterpolationType,nodeMutationRate:_.clone(this.nodeMutationRate),evolutionHistory:_.clone(this.evolutionHistory)})},m.prototype.crossWith=function(a){function b(a,b){var c=a.clone();"undefined"==typeof b?(o.push(c),h[a.id]=o.length-1):o[b]=c}function e(a,b){var c=_.find(o,{id:a.sourceNode.id}),d=_.find(o,{id:a.targetNode.id}),e=a.clone(c,d);"undefined"==typeof b?(p.push(e),h[a.id]=p.length-1):p[b]=e}function f(a,b,c){h={},_.forEach(a,function(a){c(a)}),_.forEach(b,function(a){var b=h[a.id];"undefined"==typeof b?c(a):d.randomBool()&&c(a,b)})}var g,h,i=this.nodes,j=a.nodes,k=this.connections,l=a.connections,o=[],p=[];return f(i,j,b),f(k,l,e),g=new m({nodes:o,connections:p,generation:Math.max(this.generation,a.generation),evolutionHistory:this.evolutionHistory.concat(a.evolutionHistory)}),g.lastMutation={objectsChanged:[],changeDescription:"Crossed instruments "+this.id+" & "+a.id},c(g.lastMutation),g.addToEvolutionHistory(n.CROSSOVER),g},m.prototype.play=function(a){var c=i.context;return b.call(this,a),_.forEach(this.nodes,function(a){a.play&&a.play(c)}),this},m.prototype.playHold=function(a){var c=i.context;b.call(this,a);var d=[];return _.forEach(this.nodes,function(a){a.playHold&&d.push(a.playHold(c))}),function(){_.forEach(d,function(a){a()})}},m.prototype.offlinePlay=function(a,c){var d=i.createOfflineContextAndGain();b.call(this,c,d,"offlineRefresh","offlineConnect"),_.forEach(this.nodes,function(a){a.offlinePlay&&a.offlinePlay(d.context)}),d.context.oncomplete=function(b){"function"==typeof a&&a(b.renderedBuffer)},d.context.startRendering()};var n={SPLIT_MUTATION:"sm",ADD_OSCILLATOR:"ao",ADD_CONNECTION:"ac",MUTATE_CONNECTION_WEIGHTS:"mcw",MUTATE_NODE_PARAMETERS:"mnp",CROSSOVER:"co",BRANCH:"b"};m.EvolutionTypes=n,m.prototype.addToEvolutionHistory=function(a){this.evolutionHistory.push(a)},m.prototype.mutate=function(a){"undefined"==typeof a&&(a={}),_.defaults(a,{mutationDistance:.5,splitMutationChance:.2,addOscillatorChance:.1,addConnectionChance:.2,mutateConnectionWeightsChance:.25,mutateNodeParametersChance:.25});var b,e=[{weight:a.splitMutationChance,element:this.splitMutation},{weight:a.addOscillatorChance,element:this.addOscillator},{weight:a.addConnectionChance,element:this.addConnection},{weight:a.mutateConnectionWeightsChance,element:this.mutateConnectionWeights},{weight:a.mutateNodeParametersChance,element:this.mutateNodeParameters}];b=a.mutationDistance<.5?1:a.mutationDistance<.8?2:3,_.forEach(this.nodes,function(a){a.hasChanged=!1}),_.forEach(this.connections,function(a){a.hasChanged=!1});for(var f,g=0;b>g;++g){var h=d.weightedSelection(e);h.call(this,a),f?(f.objectsChanged=f.objectsChanged.concat(this.lastMutation.objectsChanged),f.changeDescription+=", "+this.lastMutation.changeDescription):f=this.lastMutation}return this.lastMutation=f,c(this.lastMutation),this},m.prototype.splitMutation=function(){var a,b,c,e=this.getEnabledConnections(),f=e.length,g=d.randomIndexIn(0,f),i=e[g],l=i.targetNode,m=j.length,o=d.randomIndexIn(0,m),p=j[o],q=require("asNEAT/nodes/"+p)["default"];return a=q.random(),b=new h({sourceNode:i.sourceNode,targetNode:a,weight:1}),c=new h({sourceNode:a,targetNode:l,targetParameter:i.targetParameter,targetParameterNodeName:i.targetParameterNodeName,weight:i.weight,mutationDelta:_.cloneDeep(l.mutationDelta),randomMutationRange:_.cloneDeep(l.randomMutationRange)}),i.disable(),this.nodes.push(a),this.connections.push(b),this.connections.push(c),k("splitting conn "+i.toString()+" with "+a.toString()),this.lastMutation={objectsChanged:[a,b,c],changeDescription:"Split Connection"},this.addToEvolutionHistory(n.SPLIT_MUTATION),this},m.prototype.addOscillator=function(){var a,b,c,g;if(d.randomChance(this.addOscillatorFMMutationRate)){a=f.random(),b=_.filter(this.nodes,function(a){return a.connectableParameters&&a.connectableParameters.length>0}),c=d.randomElementIn(b);var i=d.randomElementIn(c.connectableParameters),j=i.randomRange;g=new h({sourceNode:a,targetNode:c,targetParameter:i.name,targetParameterNodeName:i.nodeName,weight:d.randomIn(j.min,j.max),mutationDelta:_.cloneDeep(i.deltaRange),randomMutationRange:_.cloneDeep(i.randomRange)}),k("adding fm oscillator("+i.name+") "+a.toString())}else a=e.random(),b=_.filter(this.nodes,function(a){return"OscillatorNode"!==a.name&&"NoteOscillatorNode"!==a.name}),c=d.randomElementIn(b),g=new h({sourceNode:a,targetNode:c,weight:d.randomIn(.1,1)}),k("adding audio oscillator "+a.toString());return this.nodes.push(a),this.connections.push(g),this.lastMutation={objectsChanged:[a,g],changeDescription:"Added Oscillator"},this.addToEvolutionHistory(n.ADD_OSCILLATOR),this},m.prototype.addConnection=function(){var a=d.randomChance(this.addConnectionFMMutationRate),b=this.getPossibleNewConnections(a);if(0===b.length)return k("no possible Connections"),this.lastMutation={objectsChanged:[],changeDescription:"No Mutation (No "+(a?"FM ":"")+"connections to add)"},this;var c=d.randomElementIn(b);return this.connections.push(c),k("new connection: "+c.toString()),this.lastMutation={objectsChanged:[c],changeDescription:"Added Connection"},this.addToEvolutionHistory(n.ADD_CONNECTION),this},m.prototype.getPossibleNewConnections=function(a){var b=this,c=[];return _.forEach(this.nodes,function(e){"OutNode"!==e.name&&_.forEach(b.nodes,function(f){if((!a||f.connectableParameters&&0!==f.connectableParameters.length)&&(a||"OscillatorNode"!==f.name&&"NoteOscillatorNode"!==f.name)&&e!==f){var g=_.find(b.connections,function(a){return a.sourceNode===e&&a.targetNode===f||a.sourceNode===f&&a.targetNode===e});if(!g)if(a){var i=d.randomElementIn(f.connectableParameters),j=i.randomRange;c.push(new h({sourceNode:e,targetNode:f,targetParameter:i.name,targetParameterNodeName:i.nodeName,weight:d.randomIn(j.min,j.max),mutationDelta:_.cloneDeep(i.deltaRange),randomMutationRange:_.cloneDeep(i.randomRange)}))}else c.push(new h({sourceNode:e,targetNode:f,weight:.5}))}})}),c},m.prototype.mutateConnectionWeights=function(a){"undefined"==typeof a&&(a={}),_.defaults(a,{forceMutation:!0,mutationDistance:.5});var b=d.interpolate(this.connectionMutationInterpolationType,this.connectionMutationRate,a.mutationDistance),c=[],e=!1;if(_.forEach(this.connections,function(f){d.random()<=b&&(c.push(f.mutate(a.mutationDistance)),e=!0)}),!e&&a.forceMutation){k("forcing weight mutation");var f=d.randomElementIn(this.connections);c.push(f.mutate(a.mutationDistance))}return this.lastMutation={objectsChanged:c,changeDescription:"Mutated connection gain"},this.addToEvolutionHistory(n.MUTATE_CONNECTION_WEIGHTS),this},m.prototype.mutateNodeParameters=function(a){"undefined"==typeof a&&(a={}),_.defaults(a,{forceMutation:!0,mutationDistance:.5});var b=d.interpolate(this.nodeMutationInterpolationType,this.nodeMutationRate,a.mutationDistance),c=!1,e=[];if(_.forEach(this.nodes,function(f){d.random()<=b&&(e.push(f.mutate({mutationDistance:a.mutationDistance})),c=!0)}),!c&&a.forceMutation){k("forcing node mutation");var f=d.randomElementIn(this.nodes);e.push(f.mutate({mutationDistance:a.mutationDistance}))}return this.lastMutation={objectsChanged:e,changeDescription:"Mutated Node Parameters"},this.addToEvolutionHistory(n.MUTATE_NODE_PARAMETERS),this},m.prototype.getEnabledConnections=function(){return _.filter(this.connections,"enabled")},m.prototype.getNoteOscillatorNodes=function(){return _.filter(this.nodes,{name:"NoteOscillatorNode"})},m.prototype.getOscillatorNodes=function(){return _.filter(this.nodes,{name:"OscillatorNode"})},m.prototype.getOscillatorAndNoteOscillatorNodes=function(){return _.filter(this.nodes,function(a){return"OscillatorNode"===a.name||"NoteOscillatorNode"===a.name})},m.prototype.toString=function(){var a=this.id+" gen("+this.generation+")<br>";return a+="Nodes:<br>",_.forEach(this.nodes,function(b){a+=b.toString()+"<br>"}),a+="<br>Connections:<br>",_.forEach(this.connections,function(b){a+=b.toString()+"<br>"}),a},m.prototype.toJSON=function(){var a={id:this.id,generation:this.generation,evolutionHistory:this.evolutionHistory,nodes:[],connections:[]};return _.forEach(this.nodes,function(b){a.nodes.push(b.toJSON())}),_.forEach(this.connections,function(b){a.connections.push(b.toJSON())}),JSON.stringify(a)},m.createFromJSON=function(a){var b=JSON.parse(a),c=[],e=[];return _.forEach(b.nodes,function(a){var b=JSON.parse(a),e=d.lowerCaseFirstLetter(b.name),f=require("asNEAT/nodes/"+e)["default"],g=new f(b);c.push(g)}),_.forEach(b.connections,function(a){var b,d,f,g=JSON.parse(a),i=g.sourceNode,j=g.targetNode;b=_.find(c,{id:i}),d=_.find(c,{id:j}),g.sourceNode=b,g.targetNode=d,f=new h(g),e.push(f)}),b.nodes=c,b.connections=e,new m(b)},a["default"]=m}),define("asNEAT/nodes/compressorNode",["exports"],function(a){"use strict";function b(a,b){var c=a.context.createDynamicsCompressor();c.threshold.value=this.threshold,c.knee.value=this.knee,c.ratio.value=this.ratio,c.reduction.value=this.reduction,c.attack.value=this.attack,c.release.value=this.release;var d=b?b+"Node":"node";this[d]=c}var c=require("asNEAT/utils")["default"],d=require("asNEAT/nodes/node")["default"],e="CompressorNode",f=function(a){d.call(this,a)};f.prototype=Object.create(d.prototype),f.prototype.name=e,f.prototype.defaultParameters={threshold:0,knee:0,ratio:0,reduction:0,attack:0,release:0,mutatableParameters:[{name:"threshold",mutationDeltaChance:.8,mutationDeltaInterpolationType:c.InterpolationType.EXPONENTIAL,mutationDelta:{min:[1,10],max:[5,15]},allowDeltaInverse:!0,randomMutationRange:{min:-50,max:10}},{name:"knee",mutationDeltaChance:.8,mutationDeltaInterpolationType:c.InterpolationType.EXPONENTIAL,mutationDelta:{min:[1,10],max:[5,15]},allowDeltaInverse:!0,randomMutationRange:{min:20,max:40}},{name:"ratio",mutationDeltaChance:.8,mutationDeltaInterpolationType:c.InterpolationType.EXPONENTIAL,mutationDelta:{min:[.01,.5],max:[1,4]},allowDeltaInverse:!0,randomMutationRange:{min:8,max:16}},{name:"reduction",mutationDeltaChance:.8,mutationDeltaInterpolationType:c.InterpolationType.EXPONENTIAL,mutationDelta:{min:[.01,.5],max:[1,4]},allowDeltaInverse:!0,randomMutationRange:{min:-10,max:0}},{name:"attack",mutationDeltaChance:.8,mutationDeltaInterpolationType:c.InterpolationType.EXPONENTIAL,mutationDelta:{min:[.005,.02],max:[.01,.05]},allowDeltaInverse:!0,randomMutationRange:{min:0,max:.1}},{name:"release",mutationDeltaChance:.8,mutationDeltaInterpolationType:c.InterpolationType.EXPONENTIAL,mutationDelta:{min:[.005,.02],max:[.01,.05]},allowDeltaInverse:!0,randomMutationRange:{min:0,max:.1}}]},f.prototype.clone=function(){return new f({id:this.id,threshold:this.threshold,knee:this.knee,ratio:this.ratio,reduction:this.reduction,attack:this.attack,release:this.release,mutatableParameters:_.cloneDeep(this.mutatableParameters)})},f.prototype.refresh=function(a){b.call(this,a)},f.prototype.offlineRefresh=function(a){b.call(this,a,"offline")},f.prototype.getParameters=function(){return{name:e,id:this.id,threshold:this.threshold,knee:this.knee,ratio:this.ratio,reduction:this.reduction,attack:this.attack,release:this.release}},f.prototype.toString=function(){return this.id+": CompressorNode("+this.threshold.toFixed(2)+","+this.knee.toFixed(2)+","+this.ratio.toFixed(2)+","+this.reduction.toFixed(2)+","+this.attack.toFixed(2)+","+this.release.toFixed(2)+")"},f.random=function(){var a=c.randomIn(-50,10),b=c.randomIn(20,40),d=c.randomIn(8,16),e=c.randomIn(-10,0),g=c.randomIn(0,.1),h=c.randomIn(0,.1);return new f({threshold:a,knee:b,ratio:d,reduction:e,attack:g,release:h})},a["default"]=f}),define("asNEAT/nodes/convolverNode",["exports"],function(a){"use strict";function b(a,b){var c=a.context.createConvolver();c.buffer=this.audioBuffer;var d=b?b+"Node":"node";this[d]=c}var c=(require("asNEAT/utils")["default"],require("asNEAT/nodes/node")["default"]),d=require("asNEAT/asNEAT")["default"].context,e="ConvolverNode",f=function(a){if(c.call(this,a),null===this.audioBuffer&&d.supported){for(var b=d.createBuffer(2,.5*d.sampleRate,d.sampleRate),e=b.getChannelData(0),f=b.getChannelData(1),g=0;g<b.length;g++)e[g]=2*Math.random()-1,f[g]=2*Math.random()-1;this.audioBuffer=b}};f.prototype=Object.create(c.prototype),f.prototype.name=e,f.prototype.defaultParameters={audioBuffer:null},f.prototype.clone=function(){return new f({id:this.id,audioBuffer:this.audioBuffer,mutatableParameters:_.cloneDeep(this.mutatableParameters)})},f.prototype.refresh=function(a){b.call(this,a)},f.prototype.offlineRefresh=function(a){b.call(this,a,"offline")},f.prototype.getParameters=function(){return{name:e,id:this.id}},f.prototype.toString=function(){return this.id+": ConvolverNode()"},f.random=function(){return new f},a["default"]=f}),define("asNEAT/nodes/delayNode",["exports"],function(a){"use strict";function b(a,b){var c=a.context.createDelay();c.delayTime.value=this.delayTime;var d=b?b+"Node":"node";this[d]=c}var c=require("asNEAT/utils")["default"],d=require("asNEAT/nodes/node")["default"],e="DelayNode",f=function(a){d.call(this,a)};f.prototype=Object.create(d.prototype),f.prototype.name=e,f.prototype.defaultParameters={delayTime:0,mutatableParameters:[{name:"delayTime",mutationDeltaChance:.8,mutationDeltaInterpolationType:c.InterpolationType.EXPONENTIAL,mutationDelta:{min:[.05,.5],max:[.1,1]},allowDeltaInverse:!0,randomMutationRange:{min:0,max:3}}]},f.prototype.clone=function(){return new f({id:this.id,delayTime:this.delayTime,mutatableParameters:_.cloneDeep(this.mutatableParameters)})},f.prototype.refresh=function(a){b.call(this,a)},f.prototype.offlineRefresh=function(a){b.call(this,a,"offline")},f.prototype.getParameters=function(){return{name:e,id:this.id,delayTime:this.delayTime}},f.prototype.toString=function(){return this.id+": DelayNode("+this.delayTime.toFixed(2)+")"},f.random=function(){return new f({delayTime:c.randomIn(0,3)})},a["default"]=f}),define("asNEAT/nodes/feedbackDelayNode",["exports"],function(a){"use strict";function b(a,b){var c=a.context.createGain();c.gain.value=1;var d=a.context.createDelay();d.delayTime.value=this.delayTime;var e=a.context.createGain();e.gain.value=this.feedbackRatio,c.connect(d),d.connect(e),e.connect(c);var f=b?b+"Node":"node";this[f]=c}var c=require("asNEAT/utils")["default"],d=require("asNEAT/nodes/node")["default"],e="FeedbackDelayNode",f=function(a){d.call(this,a)};f.prototype=Object.create(d.prototype),f.prototype.name=e,f.prototype.defaultParameters={delayTime:0,feedbackRatio:.2,mutatableParameters:[{name:"delayTime",mutationDeltaChance:.8,mutationDeltaInterpolationType:c.InterpolationType.EXPONENTIAL,mutationDelta:{min:[.1,.4],max:[.4,.8]},allowDeltaInverse:!0,randomMutationRange:{min:0,max:3}},{name:"feedbackRatio",mutationDeltaChance:.8,mutationDeltaInterpolationType:c.InterpolationType.EXPONENTIAL,mutationDelta:{min:[.05,.1],max:[.1,.3]},allowDeltaInverse:!0,randomMutationRange:{min:0,max:.6}}]},f.prototype.clone=function(){return new f({id:this.id,delayTime:this.delayTime,feedbackRatio:this.feedbackRatio,mutatableParameters:_.cloneDeep(this.mutatableParameters)})},f.prototype.refresh=function(a){b.call(this,a)},f.prototype.offlineRefresh=function(a){b.call(this,a,"offline")},f.prototype.getParameters=function(){return{name:e,id:this.id,delayTime:this.delayTime,feedbackRatio:this.feedbackRatio}},f.prototype.toString=function(){return this.id+": FeedbackDelayNode("+this.delayTime.toFixed(2)+","+this.feedbackRatio.toFixed(2)+")"},f.random=function(){return new f({delayTime:c.randomIn(0,3),feedbackRatio:c.randomIn(0,.6)})},a["default"]=f}),define("asNEAT/nodes/filterNode",["exports"],function(a){"use strict";function b(a,b){var c=a.context.createBiquadFilter();c.type=this.type,c.frequency.value=this.frequency,c.detune.value=this.detune,c.Q.value=this.q,c.gain.value=this.gain;var d=b?b+"Node":"node";this[d]=c}var c=require("asNEAT/utils")["default"],d=require("asNEAT/nodes/node")["default"],e="FilterNode",f=0,g=1500,h=1e-4,i=20,j=-5,k=5,l=function(a){d.call(this,a)};l.prototype=Object.create(d.prototype),l.prototype.name=e,l.prototype.defaultParameters={type:0,frequency:500,detune:0,q:1,gain:1,mutatableParameters:[{name:"type",mutationDeltaChance:0,randomMutationRange:{min:0,max:8},allowRandomInverse:!1,discreteMutation:!0},{name:"frequency",mutationDeltaChance:.8,mutationDeltaInterpolationType:c.InterpolationType.EXPONENTIAL,mutationDelta:{min:[10,100],max:[300,700]},allowDeltaInverse:!0,randomMutationRange:{min:27.5,max:1046.5}}],connectableParameters:[{name:"frequency",deltaRange:{min:[10,100],max:[300,700]},randomRange:{min:f,max:g}},{name:"Q",deltaRange:{min:[1e-4,1],max:[3,10]},randomRange:{min:h,max:i}},{name:"gain",deltaRange:{min:[.1,1],max:[2,6]},randomRange:{min:j,max:k}}]},l.prototype.clone=function(){return new l({id:this.id,type:this.type,frequency:this.frequency,detune:this.detune,q:this.q,gain:this.gain,mutatableParameters:_.cloneDeep(this.mutatableParameters)})},l.prototype.refresh=function(a){b.call(this,a)},l.prototype.offlineRefresh=function(a){b.call(this,a,"offline")},l.prototype.getParameters=function(){return{name:e,id:this.id,type:l.TYPES.nameFor(this.type),frequency:this.frequency,detune:this.detune,q:this.q,gain:this.gain}},l.prototype.toString=function(){return this.id+": FilterNode("+this.type+","+this.frequency.toFixed(2)+")"},l.TYPES=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"],l.TYPES.nameFor=function(a){return"string"==typeof a?a:l.TYPES[a]},l.random=function(){var a=c.randomIndexIn(0,l.TYPES.length),b=c.randomIn(f,g),d=c.randomIn(h,i),e=c.randomIn(j,k);return new l({type:l.TYPES[a],frequency:b,q:d,gain:e})},a["default"]=l}),define("asNEAT/nodes/gainNode",["exports"],function(a){"use strict";function b(a,b){var c=a.context.createGain();c.gain.value=this.gain;var d=b?b+"Node":"node";this[d]=c}var c=require("asNEAT/utils")["default"],d=require("asNEAT/nodes/node")["default"],e="GainNode",f=.5,g=1.5,h=function(a){d.call(this,a)};h.prototype=Object.create(d.prototype),h.prototype.name=e,h.prototype.defaultParameters={gain:1,mutatableParameters:[{name:"gain",mutationDeltaChance:.8,mutationDeltaInterpolationType:c.InterpolationType.EXPONENTIAL,mutationDelta:{min:[.02,.1],max:[.2,.4]},allowDeltaInverse:!0,randomMutationRange:{min:-1,max:1}}],connectableParameters:[{name:"gain",deltaRange:{min:[.1,.3],max:[.5,1]},randomRange:{min:f,max:g}}]},h.prototype.clone=function(){return new h({id:this.id,gain:this.gain,mutatableParameters:_.cloneDeep(this.mutatableParameters)})},h.prototype.refresh=function(a){b.call(this,a)},h.prototype.offlineRefresh=function(a){b.call(this,a,"offline")},h.prototype.getParameters=function(){return{name:e,id:this.id,gain:this.gain}},h.prototype.toString=function(){return this.id+": GainNode("+this.gain.toFixed(2)+")"},h.random=function(){var a=c.randomBool(),b=c.randomIn(f,g);return b*=a?-1:1,new h({gain:b})},a["default"]=h}),define("asNEAT/nodes/node",["exports"],function(a){"use strict";var b=require("asNEAT/utils")["default"],c="Node",d=function(a){b.extend(this,_.defaults(this.defaultParameters,d.prototype.defaultParameters),a),this.hasChanged=!1,this.id=a&&"undefined"!=typeof a.id?a.id:b.createHash()};d.prototype.name=c,d.prototype.defaultParameters={parameterMutationInterpolationType:b.InterpolationType.EXPONENTIAL,parameterMutationChance:[.05,.8],mutatableParameters:[],connectableParameters:[]},d.prototype.clone=function(){throw"clone not implemented"},d.prototype.refresh=function(){throw"refresh not implemented"},d.prototype.offlineRefresh=function(){throw"offline refresh not implemented"},d.prototype.getParameters=function(){throw"getParameters not implemented"},d.prototype.toString=function(){throw"toString not implemented"},d.prototype.mutate=function(a){function c(c){b.mutateParameter({obj:d,parameter:c.name,mutationDeltaInterpolationType:c.mutationDeltaInterpolationType,mutationDeltaChance:c.mutationDeltaChance,mutationDistance:a.mutationDistance,mutationDelta:c.mutationDelta,allowDeltaInverse:c.allowDeltaInverse,randomMutationRange:c.randomMutationRange,allowRandomInverse:c.allowRandomInverse,discreteMutation:c.discreteMutation})}"undefined"==typeof a&&(a={}),_.defaults(a,{mutationDistance:.5});var d=this,e=this.mutatableParameters,f=!1;if(!e||0===e.length)return b.log("no mutation parameters"),this;var g=b.interpolate(this.parameterMutationInterpolationType,this.parameterMutationChance,a.mutationDistance);if(_.forEach(this.mutatableParameters,function(a){return b.randomChance(g)?(c(a),void(f=!0)):!0}),!f){var h=b.randomElementIn(e);c(h)}return this},d.prototype.toJSON=function(){var a=this.getParameters();return JSON.stringify(a)},d.random=function(){throw"static random not implemented"},a["default"]=d}),define("asNEAT/nodes/noteOscillatorNode",["exports"],function(a){"use strict";function b(a,b){var c=a.context.createOscillator();c.type=this.type,c.frequency.value=d.frequencyOfStepsFromRootNote(this.stepFromRootNote+this.noteOffset);var e=a.context.createGain();c.connect(e);var f=b?b+"OscNode":"oscNode",g=b?b+"Node":"node";this[f]=c,this[g]=e}function c(a,b,c){var d=this.attackDuration+this.decayDuration+this.sustainDuration,e=this.attackVolume,g=this.attackDuration,h=this.sustainVolume,i=this.decayDuration,j=this.releaseDuration;f.setupEnvelope(a,b,c,e,g,h,i);var k=a.currentTime+d;f.setupRelease(a,k,b,c,j)}var d=require("asNEAT/utils")["default"],e=require("asNEAT/nodes/node")["default"],f=require("asNEAT/nodes/oscillatorNode")["default"],g="NoteOscillatorNode",h=function(a){e.call(this,a)};h.prototype=Object.create(e.prototype),h.prototype.name=g,h.prototype.defaultParameters={name:g,type:0,stepFromRootNote:0,noteOffset:0,detune:0,attackDuration:.2,decayDuration:.4,releaseDuration:.2,sustainDuration:.5,attackVolume:1.1,sustainVolume:1,mutatableParameters:[{name:"type",mutationDeltaChance:0,randomMutationRange:{min:0,max:4},allowRandomInverse:!1,discreteMutation:!0},{name:"noteOffset",mutationDeltaChance:.8,mutationDeltaInterpolationType:d.InterpolationType.EXPONENTIAL,mutationDelta:{min:[1,4],max:[5,15]},allowDeltaInverse:!0,randomMutationRange:{min:-20,max:20},discreteMutation:!0},{name:"attackDuration",mutationDeltaChance:.8,mutationDeltaInterpolationType:d.InterpolationType.EXPONENTIAL,mutationDelta:{min:[.01,.05],max:[.1,.3]},allowDeltaInverse:!0,randomMutationRange:{min:.01,max:1}},{name:"decayDuration",mutationDeltaChance:.8,mutationDeltaInterpolationType:d.InterpolationType.EXPONENTIAL,mutationDelta:{min:[.01,.05],max:[.1,.3]},allowDeltaInverse:!0,randomMutationRange:{min:.01,max:1}},{name:"releaseDuration",mutationDeltaChance:.8,mutationDeltaInterpolationType:d.InterpolationType.EXPONENTIAL,mutationDelta:{min:[.01,.05],max:[.1,.3]},allowDeltaInverse:!0,randomMutationRange:{min:.01,max:1}},{name:"attackVolume",mutationDeltaChance:.8,mutationDeltaInterpolationType:d.InterpolationType.EXPONENTIAL,mutationDelta:{min:[.01,.05],max:[.1,.3]},allowDeltaInverse:!0,randomMutationRange:{min:.5,max:1.5}}],connectableParameters:[{name:"frequency",nodeName:"oscNode",deltaRange:{min:[10,200],max:[300,700]},randomRange:{min:-2e3,max:2e3}}]},h.prototype.clone=function(){return new h({id:this.id,type:this.type,noteOffset:this.noteOffset,detune:this.detune,attackDuration:this.attackDuration,decayDuration:this.decayDuration,releaseDuration:this.releaseDuration,sustainDuration:this.sustainDuration,attackVolume:this.attackVolume,sustainVolume:this.sustainVolume,mutatableParameters:_.cloneDeep(this.mutatableParameters)})},h.prototype.refresh=function(a){b.call(this,a)},h.prototype.offlineRefresh=function(a){b.call(this,a,"offline")},h.prototype.play=function(a){var b=this.node,d=this.oscNode;c.call(this,a,b,d)},h.prototype.offlinePlay=function(a){var b=this.offlineNode,d=this.offlineOscNode;c.call(this,a,b,d)},h.prototype.playHold=function(a){var b=(this.attackDuration+this.decayDuration+this.sustainDuration,this.node),c=this.oscNode,d=this.attackVolume,e=this.attackDuration,g=this.sustainVolume,h=this.decayDuration,i=this.releaseDuration;return f.setupEnvelope(a,b,c,d,e,g,h),function(){var d=a.currentTime;f.setupRelease(a,d,b,c,i)}},h.prototype.getParameters=function(){return{name:g,id:this.id,type:f.TYPES.nameFor(this.type),noteOffset:this.noteOffset,detune:this.detune,attackDuration:this.attackDuration,decayDuration:this.decayDuration,releaseDuration:this.releaseDuration,sustainDuration:this.sustainDuration,attackVolume:this.attackVolume,sustainVolume:this.sustainVolume}},h.prototype.toString=function(){return this.id+": NoteOscillatorNode("+this.type+","+this.noteOffset+", ADSR: "+this.attackDuration.toFixed(2)+" ("+this.attackVolume.toFixed(2)+"), "+this.decayDuration.toFixed(2)+", "+this.sustainDuration.toFixed(2)+" ("+this.sustainVolume.toFixed(2)+"), "+this.releaseDuration.toFixed(2)+")"},h.random=function(){var a=d.randomIndexIn(0,f.TYPES.length),b=d.randomIndexIn(-20,20),c=d.randomIn(.01,1),e=d.randomIn(.01,1),g=d.randomIn(.01,1),i=d.randomIn(.5,1.5);return new h({type:f.TYPES[a],noteOffset:b,attackDuration:c,decayDuration:e,releaseDuration:g,attackVolume:i})},a["default"]=h}),define("asNEAT/nodes/oscillatorNode",["exports"],function(a){"use strict";function b(a,b){var c=a.context.createOscillator();c.type=this.type,c.frequency.value=this.frequency;var d=a.context.createGain();c.connect(d);var e=b?b+"OscNode":"oscNode",f=b?b+"Node":"node";this[e]=c,this[f]=d}function c(a,b,c){var d=this.attackDuration+this.decayDuration+this.sustainDuration,e=this.attackVolume,f=this.attackDuration,g=this.sustainVolume,h=this.decayDuration,j=this.releaseDuration;i.setupEnvelope(a,b,c,e,f,g,h);var k=a.currentTime+d;i.setupRelease(a,k,b,c,j)}var d=require("asNEAT/utils")["default"],e=require("asNEAT/nodes/node")["default"],f="OscillatorNode",g=27.5,h=1046.5,i=function(a){e.call(this,a)};i.prototype=Object.create(e.prototype),i.prototype.name=f,i.prototype.defaultParameters={type:0,frequency:1e3,detune:0,attackDuration:.2,decayDuration:.4,releaseDuration:.2,sustainDuration:.5,attackVolume:1.1,sustainVolume:1,mutatableParameters:[{name:"type",mutationDeltaChance:0,randomMutationRange:{min:0,max:4},allowRandomInverse:!1,discreteMutation:!0},{name:"frequency",mutationDeltaChance:.8,mutationDeltaInterpolationType:d.InterpolationType.EXPONENTIAL,mutationDelta:{min:[10,200],max:[50,800]},allowDeltaInverse:!0,randomMutationRange:{min:g,max:h}},{name:"attackDuration",mutationDeltaChance:.8,mutationDeltaInterpolationType:d.InterpolationType.EXPONENTIAL,mutationDelta:{min:[.01,.05],max:[.1,.3]},allowDeltaInverse:!0,randomMutationRange:{min:.01,max:1}},{name:"decayDuration",mutationDeltaChance:.8,mutationDeltaInterpolationType:d.InterpolationType.EXPONENTIAL,mutationDelta:{min:[.01,.05],max:[.1,.3]},allowDeltaInverse:!0,randomMutationRange:{min:.01,max:1}},{name:"releaseDuration",mutationDeltaChance:.8,mutationDeltaInterpolationType:d.InterpolationType.EXPONENTIAL,mutationDelta:{min:[.01,.05],max:[.1,.3]},allowDeltaInverse:!0,randomMutationRange:{min:.01,max:1}},{name:"attackVolume",mutationDeltaChance:.8,mutationDeltaInterpolationType:d.InterpolationType.EXPONENTIAL,mutationDelta:{min:[.01,.05],max:[.1,.3]},allowDeltaInverse:!0,randomMutationRange:{min:.5,max:1.5}}],connectableParameters:[{name:"frequency",nodeName:"oscNode",deltaRange:{min:[10,200],max:[300,700]},randomRange:{min:-2e3,max:2e3}}]},i.prototype.clone=function(){return new i({id:this.id,type:this.type,frequency:this.frequency,detune:this.detune,attackDuration:this.attackDuration,decayDuration:this.decayDuration,releaseDuration:this.releaseDuration,sustainDuration:this.sustainDuration,attackVolume:this.attackVolume,sustainVolume:this.sustainVolume,mutatableParameters:_.cloneDeep(this.mutatableParameters)})
},i.prototype.refresh=function(a){b.call(this,a)},i.prototype.offlineRefresh=function(a){b.call(this,a,"offline")},i.prototype.play=function(a){var b=this.node,d=this.oscNode;c.call(this,a,b,d)},i.prototype.offlinePlay=function(a){var b=this.offlineNode,d=this.offlineOscNode;c.call(this,a,b,d)},i.prototype.playHold=function(a){var b=(this.attackDuration+this.decayDuration+this.sustainDuration,this.node),c=this.oscNode,d=this.attackVolume,e=this.attackDuration,f=this.sustainVolume,g=this.decayDuration,h=this.releaseDuration;return i.setupEnvelope(a,b,c,d,e,f,g),function(){var d=a.currentTime;i.setupRelease(a,d,b,c,h)}},i.prototype.getParameters=function(){return{name:f,id:this.id,type:i.TYPES.nameFor(this.type),frequency:this.frequency,detune:this.detune,attackDuration:this.attackDuration,decayDuration:this.decayDuration,releaseDuration:this.releaseDuration,sustainDuration:this.sustainDuration,attackVolume:this.attackVolume,sustainVolume:this.sustainVolume}},i.prototype.toString=function(){return this.id+": OscillatorNode(t:"+this.type+", f:"+this.frequency.toFixed(2)+", ADSR: "+this.attackDuration.toFixed(2)+" ("+this.attackVolume.toFixed(2)+"), "+this.decayDuration.toFixed(2)+", "+this.sustainDuration.toFixed(2)+" ("+this.sustainVolume.toFixed(2)+"), "+this.releaseDuration.toFixed(2)+")"},i.TYPES=["sine","square","sawtooth","triangle"],i.TYPES.nameFor=function(a){return"string"==typeof a?a:i.TYPES[a]},i.random=function(){var a=d.randomIndexIn(0,i.TYPES.length),b=d.randomIn(g,h),c=d.randomIn(.01,1),e=d.randomIn(.01,1),f=d.randomIn(.01,1),j=d.randomIn(.5,1.5);return new i({type:i.TYPES[a],frequency:b,attackDuration:c,decayDuration:e,releaseDuration:f,attackVolume:j})},i.setupEnvelope=function(a,b,c,d,e,f,g){var h=a.currentTime;b.gain.cancelScheduledValues(h),b.gain.value=1,b.gain.setValueAtTime(0,h),b.gain.linearRampToValueAtTime(d,h+e),b.gain.linearRampToValueAtTime(f,h+e+g),c.start(0)},i.setupRelease=function(a,b,c,d,e){var f=a.currentTime;f>=b&&c.gain.cancelScheduledValues(0),c.gain.setValueAtTime(c.gain.value,b),c.gain.linearRampToValueAtTime(0,b+e),d.stop(b+e)},a["default"]=i}),define("asNEAT/nodes/outNode",["exports"],function(a){"use strict";var b=require("asNEAT/asNEAT")["default"],c=require("asNEAT/nodes/node")["default"],d="OutNode",e=function(a){if(c.call(this,a),this.id=0,b.context.supported){var d=b.context.createGain();d.gain.value=1,d.connect(b.globalGain),this.secondaryNode=d,this.resetLocalGain(),b.OutNodes.push(this)}};e.prototype=Object.create(c.prototype),e.prototype.name=d,e.prototype.defaultParameters={},e.prototype.clone=function(){return new e({id:this.id})},e.prototype.refresh=function(){},e.prototype.offlineRefresh=function(a){var b=a.context.createGain();b.gain.value=1,b.connect(a.globalGain),this.offlineNode=b},e.prototype.resetLocalGain=function(){var a=this.node;a&&(a.gain.value=0,a.disconnect());var c=b.context.createGain();c.gain.value=1,c.connect(this.secondaryNode),this.node=c},e.prototype.getParameters=function(){return{name:d,id:this.id}},e.prototype.toString=function(){return this.id+": OutNode"},a["default"]=e}),define("asNEAT/nodes/pannerNode",["exports"],function(a){"use strict";function b(a,b){var c=a.context.createPanner();c.setPosition(this.x,this.y,this.z);var d=b?b+"Node":"node";this[d]=c}var c=require("asNEAT/utils")["default"],d=require("asNEAT/nodes/node")["default"],e="PannerNode",f=function(a){d.call(this,a)};f.prototype=Object.create(d.prototype),f.prototype.name=e,f.prototype.defaultParameters={x:0,y:0,z:0,mutatableParameters:[{name:"x",mutationDeltaChance:.8,mutationDeltaInterpolationType:c.InterpolationType.EXPONENTIAL,mutationDelta:{min:[.1,2],max:[4,8]},allowDeltaInverse:!0,randomMutationRange:{min:-5,max:5}},{name:"y",mutationDeltaChance:.8,mutationDeltaInterpolationType:c.InterpolationType.EXPONENTIAL,mutationDelta:{min:[.1,2],max:[4,8]},allowDeltaInverse:!0,randomMutationRange:{min:-5,max:5}},{name:"z",mutationDeltaChance:.8,mutationDeltaInterpolationType:c.InterpolationType.EXPONENTIAL,mutationDelta:{min:[.1,2],max:[4,8]},allowDeltaInverse:!0,randomMutationRange:{min:-5,max:5}}]},f.prototype.clone=function(){return new f({id:this.id,x:this.x,y:this.y,z:this.z,mutatableParameters:_.cloneDeep(this.mutatableParameters)})},f.prototype.refresh=function(a){b.call(this,a)},f.prototype.offlineRefresh=function(a){b.call(this,a,"offline")},f.prototype.getParameters=function(){return{name:e,id:this.id,x:this.x.toFixed(2),y:this.y.toFixed(2),z:this.z.toFixed(2)}},f.prototype.toString=function(){return this.id+": PannerNode("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.z.toFixed(2)+")"},f.random=function(){var a=c.randomIn(-5,5),b=c.randomIn(-5,5),d=c.randomIn(-5,5);return new f({x:a,y:b,z:d})},a["default"]=f}),define("asNEAT/population",["exports"],function(a){"use strict";var b=require("asNEAT/utils")["default"],c=require("asNEAT/network")["default"],d=(b.log,"Population"),e=function(a){b.extend(this,this.defaultParameters,a)};e.prototype.name=d,e.prototype.defaultParameters={networks:[],networkParameters:{},numberOfMutationsPerGeneration:1,numberOfNewParentMutations:3,populationCount:9,crossoverRate:.1,mutationRate:1,mutationParams:{mutationDistance:.5,splitMutationChance:.2,addOscillatorChance:.1,addConnectionChance:.2,mutateConnectionWeightsChance:.25,mutateNodeParametersChance:.25}},e.prototype.clone=function(){var a=[];return _.forEach(this.networks,function(b){a.push(b.clone())}),new e({networks:a,networkParameters:_.cloneDeep(this.networkParameters),numberOfMutationsPerGeneration:this.numberOfMutationsPerGeneration,numberOfNewParentMutations:this.numberOfNewParentMutations,populationCount:this.populationCount,crossoverRate:this.crossoverRate,mutationRate:this.mutationRate})},e.prototype.toString=function(){var a="Networks["+this.networks.length+"]:<br>";return a+="crossoverRate: "+this.crossoverRate+"<br>",a+="mutationRate: "+this.mutationRate+"<br>"},e.prototype.GenerateNewRandomParent=function(){var a,b,d=new c(this.networkParameters);for(a=0,b=this.numberOfNewParentMutations;b>a;++a)d.mutate(this.mutationParams);return d},e.generateFromParents=function(a,c){for(var d,f,g,h,i,j=new e(c),k=j.numberOfMutationsPerGeneration,l=(j.networkParameters,a.length>0),m=1===a.length;j.networks.length<j.populationCount;){if(h=!1,d=l?b.randomElementIn(a):j.GenerateNewRandomParent(),b.randomChance(j.crossoverRate)&&(f=!l||m?j.GenerateNewRandomParent():b.randomElementIn(a,d),d=d.crossWith(f),h=!0),b.randomChance(j.mutationRate)){for(h&&(i=d.lastMutation),d=d.clone(),g=0;k>g;++g)d.mutate(j.mutationParams);h&&(d.lastMutation.objectsChanged=i.objectsChanged.concat(d.lastMutation.objectsChanged),d.lastMutation.changeDescription=i.changeDescription+" & "+d.lastMutation.changeDescription)}++d.generation,j.networks.push(d)}return j},a["default"]=e}),define("asNEAT/utils",["exports"],function(a){"use strict";function b(a){var b;if(_.isNumber(a.mutationDelta.min)||"undefined"!=typeof a.mutationDelta.min.y0)throw"Old mutationDelta with min/max as number or {y0,y1} no longer supported";return b={min:d.interpolate(a.mutationDeltaInterpolationType,a.mutationDelta.min,a.mutationDistance),max:d.interpolate(a.mutationDeltaInterpolationType,a.mutationDelta.max,a.mutationDistance)},b=a.discreteMutation?d.randomIndexIn(b):d.randomIn(b),a.allowDeltaInverse&&d.randomBool()&&(b*=-1),d.log("mutating by delta "+b.toFixed(3)),a.obj[a.parameter]+=b,{mutatedParameter:a.parameter,changeDescription:"by delta "+b.toFixed(3)}}function c(a){var b,c;return c=a.randomMutationRange,b=a.discreteMutation?d.randomIndexIn(c):d.randomIn(c),a.allowRandomInverse&&d.randomBool()&&(b*=-1),d.log("mutating with new param "+b),a.obj[a.parameter]=b,{mutatedParameter:a.parameter,changeDescription:"to "+b}}var d={};d.IS_DEBUG=!0,d.log=function(a){d.IS_DEBUG&&(console.log(a),"undefined"!=typeof $&&$(".log").prepend("<div>"+a+"</div>"))},d.error=function(a){throw a},d.upperCaseFirstLetter=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},d.lowerCaseFirstLetter=function(a){return a.charAt(0).toLowerCase()+a.slice(1)},d.random=function(){return Math.random()},d.randomIn=function(a,b){return _.isObject(a)&&(b=a.max,a=a.min),Math.random()*(b-a)+a},d.randomIndexIn=function(a,b){return _.isObject(a)&&(b=a.max,a=a.min),Math.floor(d.randomIn(a,b))},d.randomChance=function(a){return d.random()<=a},d.randomBool=function(){return!!Math.round(Math.random())},d.randomElementIn=function(a,b){if(0!==a.length){if(b)return d.randomElementIn(_.reject(a,b));var c=d.randomIndexIn(0,a.length);return a[c]}},d.clamp=function(a,b,c){return a>c?c:b>a?b:a},d.shuffle=function(a){for(var b,c,d=a.length;d;b=parseInt(Math.random()*d),c=a[--d],a[d]=a[b],a[b]=c);return a},d.weightedSelection=function(a){var b,c=Math.random(),d=0,e=_.reduce(a,function(a,b){return a+b.weight},0);if(1!==e)throw"xs' weights don't add up to 1.0";return _.forEach(a,function(a){return d+=a.weight,d>=c&&0!==a.weight?(b=a.element,!1):void 0}),b},d.solveLinearEqn=function(a,b){return{a:b-a,b:a}},d.solveExponentialEqn=function(a,b){return{c:a,a:Math.log(b/a)}},d.InterpolationType={LINEAR:"linear",EXPONENTIAL:"exponential"},d.interpolate=function(a,b,c){var e,f;if(a===d.InterpolationType.LINEAR)e=d.solveLinearEqn(b[0],b[1]),f=e.a*c+e.b;else{if(a!==d.InterpolationType.EXPONENTIAL)throw"InterpolationType not supported";e=d.solveExponentialEqn(b[0],b[1]),f=e.c*Math.exp(e.a*c)}return f},d.mutateParameter=function(a){return"undefined"==typeof a&&(a={}),a=_.defaults({},a,{obj:null,parameter:"param",mutationDeltaInterpolationType:d.InterpolationType.LINEAR,mutationDeltaChance:.8,mutationDistance:.5,mutationDelta:{min:[.05,.5],max:[.2,.8]},allowDeltaInverse:!0,randomMutationRange:{min:.1,max:1.5},allowRandomInverse:!0,discreteMutation:!1,mutateDelta:b,mutateRandom:c}),d.log("mutating("+a.parameter+") "+a.obj),d.randomChance(a.mutationDeltaChance)?a.mutateDelta(a):a.mutateRandom(a)},d.cantorPair=function(a,b){return(a+b)*(a+b+1)/2+b},d.reverseCantorPair=function(a){var b=Math.floor((-1+Math.sqrt(1+8*a))/2),c=b*(b+3)/2-a,d=a-b*(b+1)/2;return{x:c,y:d}},d.extend=function(a,b,c){_.assign(a,_.cloneDeep(b),c)},d.roundTo2Places=function(a){return+(Math.round(a+"e+2")+"e-2")};var e=Math.pow(2,1/12),f=440,g={c:-9,d:-7,e:-5,f:-4,g:-2,a:0,b:2};d.frequencyForNote=function(a){var b=d.stepsFromRootNote(a);return d.frequencyOfStepsFromRootNote(b)},d.stepsFromRootNote=function(a){a=a.toLowerCase().split("");var b=a[0],c=parseInt(a[1],10),d=a[2],e=g[b];return"#"===d?++e:"b"===d&&--e,e+=12*(c-4)},d.noteForFrequency=function(){},d.frequencyOfStepsFromRootNote=function(a){return f*Math.pow(e,a)};var h=6,i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";d.createHash=function(a,b){"undefined"==typeof a&&(a=h),"undefined"==typeof b&&(b=i);for(var c=0,d=[];a>c;++c)d.push(b.charAt(Math.floor(Math.random()*b.length)));return d.join("")},a["default"]=d});
//# sourceMappingURL=asNEAT.min.js.map